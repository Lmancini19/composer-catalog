let composerRepository=function(){let t=[];function e(){return t}function n(e){e?.name&&e?.birth&&e?.death&&e?.portraitUrl&&e?.openOpusId?t.push(e):console.log("Composer input data is not valid.")}function o(t){let e=$(".modal-body"),n=$(".modal-title"),o=$(".modal-header"),r=$(".close");o.empty(),n.empty(),e.empty();let i=document.createElement("h5");i.innerText=t.name;let a=document.createElement("p");a.innerText="Birth: "+t.birth;let l=document.createElement("p");l.innerText="Death: "+t.death;let p=document.createElement("img");p.setAttribute("src",t.portraitUrl),p.setAttribute("alt","Portrait of the composer"),o.append(i,r),e.append(p),e.append(a),e.append(l)}function r(t){return fetch(`https://api.openopus.org/work/list/composer/${t.openOpusId}/genre/all.json`).then(function(t){return t.json()}).then(function(e){t.works=e.works}).catch(function(t){console.error(t)})}return{getAll:e,add:n,addListItem:function t(e){let n=document.querySelector(".composer-list"),i=document.createElement("div"),a=document.createElement("button");if(a.innerText=e.name,a.classList.add("btn","btn-outline-dark"),a.setAttribute("data-toggle","modal"),a.setAttribute("data-target","#exampleModal"),i.classList.add("col-md-4","mb-3","text-center"),i.appendChild(a),function t(e,n){e.addEventListener("click",function(){(function t(e){r(e).then(function(){o(e)})})(n)})}(a,e),n.children.length%4==0){let l=document.createElement("div");l.classList.add("row"),n.appendChild(l)}let p=n.getElementsByClassName("row");p[p.length-1].appendChild(i)},loadList:function t(){return fetch("https://api.openopus.org/composer/list/pop.json").then(function(t){return t.json()}).then(function(t){t.composers.forEach(function(t){n({name:t.complete_name,birth:t.birth,death:t.death,portraitUrl:t.portrait,openOpusId:t.id})})}).catch(function(t){console.error(t)})},loadDetails:r,showModal:o}}();composerRepository.loadList().then(function(){composerRepository.getAll().forEach(function(t){composerRepository.addListItem(t)})});