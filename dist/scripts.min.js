let composerRepository=function(){let t=[];function e(){return t}function n(e){e?.name&&e?.fullName&&e?.epoch&&e?.birth&&e?.death&&e?.portraitUrl&&e?.openOpusId?t.push(e):console.log("Composer input data is not valid.")}function o(t){let e=$(".modal-body"),n=$(".modal-title"),o=$(".modal-header"),r=$(".close");o.empty(),n.empty(),e.empty();let a=document.createElement("h5");a.innerHTML="<strong>"+t.name+"</strong>";let i=document.createElement("p");i.innerHTML="<strong>Full Name:</strong> "+t.fullName;let l=document.createElement("p");l.innerHTML="<strong>Epoch:</strong> "+t.epoch;let p=document.createElement("p");p.innerHTML="<strong>Birth:</strong> "+t.birth;let s=document.createElement("p");s.innerHTML="<strong>Death:</strong> "+t.death;let c=document.createElement("img");c.setAttribute("src",t.portraitUrl),c.setAttribute("alt","Portrait of the composer"),o.append(a,r),e.append(c),e.append(i),e.append(l),e.append(p),e.append(s)}function r(t){return fetch(`https://api.openopus.org/work/list/composer/${t.openOpusId}/genre/all.json`).then(function(t){return t.json()}).then(function(e){t.works=e.works}).catch(function(t){console.error(t)})}return{getAll:e,add:n,addListItem:function t(e){let n=document.querySelector(".composer-list"),a=document.createElement("div"),i=document.createElement("button");if(i.innerText=e.name,i.classList.add("btn","btn-outline-dark"),i.setAttribute("data-toggle","modal"),i.setAttribute("data-target","#exampleModal"),a.classList.add("col-md-4","mb-3","text-center"),a.appendChild(i),function t(e,n){e.addEventListener("click",function(){(function t(e){r(e).then(function(){o(e)})})(n)})}(i,e),n.children.length%4==0){let l=document.createElement("div");l.classList.add("row"),n.appendChild(l)}let p=n.getElementsByClassName("row");p[p.length-1].appendChild(a)},loadList:function t(){return fetch("https://api.openopus.org/composer/list/pop.json").then(function(t){return t.json()}).then(function(t){t.composers.forEach(function(t){n({name:t.name,fullName:t.complete_name,epoch:t.epoch,birth:t.birth,death:t.death,portraitUrl:t.portrait,openOpusId:t.id})})}).catch(function(t){console.error(t)})},loadDetails:r,showModal:o}}();composerRepository.loadList().then(function(){composerRepository.getAll().forEach(function(t){composerRepository.addListItem(t)})});